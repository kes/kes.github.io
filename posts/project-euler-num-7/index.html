<!DOCTYPE html>
<html lang="en-us"
      dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <link rel="stylesheet" href="/common.css" type="text/css" media="screen, projection">
  <link rel="stylesheet" href="/style.css" type="text/css" media="screen, projection">
  <title>Karl Stump's Blog</title>


</head>
<body>
  <div class="site">
  <header>
    <div class="title">
  <a href="/">Karl Stump </a>
  <a class="extra" href="/">home</a>
</header>

  </header>
  <main>
    
<div id="post">Project Euler - Number 7<p class="meta"> Aug 22, 2024</p>
  <p>You can find the problem here: <a href="https://projecteuler.net/problem=7">https://projecteuler.net/problem=7</a></p>
<p>The problem statement:</p>
<blockquote>
<p>By listing the first six prime numbers: 2, 3, 5, 7, 11, and 13 we can see that the 6th prime is 13.</p>
<p>What is the 10001st prime number?</p>
</blockquote>
<p>Consider an array like this:</p>
<table>
<thead>
<tr>
<th>n</th>
<th>a[n]</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
</tr>
<tr>
<td>8</td>
<td>0</td>
</tr>
<tr>
<td>9</td>
<td>0</td>
</tr>
<tr>
<td>10</td>
<td>0</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
</tr>
<tr>
<td>12</td>
<td>0</td>
</tr>
<tr>
<td>13</td>
<td>1</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>where n (the index of the array) is the number of interest – So, is the number prime? If
a[n] is 1 the number is prime, and if 0 it is not prime.</p>
<p>Generating an array initialized to 1 is easy enough. We can then go through all the multiples of the
primes set the value at that index to 0. This procedure is called the Sieve of Eratosthenes, a
description of which is easily findable. For example, here:
<a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes</a></p>
<p>If I follow the given algorithm, then I get the following:</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span>(defun generate-primes (n)
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Returns a list of n prime numbers&#34;</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">let</span> ((numbers (<span style="color:#a6e22e">make-array</span> n <span style="color:#e6db74">:initial-element</span> <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>        (i <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>        (j <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        (x <span style="color:#ae81ff">0</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; note: the index of the array, is the number of</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; interest, while the value at array[index] is whether</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; it&#39;s prime or not</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; starting at the prime number 2 (that is, we consider 2 to be</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; the first prime number)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; Behold! The Sieve of Eratosthenes!  :)</span>
</span></span><span style="display:flex;"><span>    (loop while (<span style="color:#a6e22e">&lt;</span> i (<span style="color:#a6e22e">sqrt</span> n))
</span></span><span style="display:flex;"><span>          do (<span style="color:#66d9ef">progn</span>
</span></span><span style="display:flex;"><span>               <span style="color:#75715e">;; if array[i] is a prime number, continue, but if not</span>
</span></span><span style="display:flex;"><span>               <span style="color:#75715e">;; there&#39;s nothing to do so we&#39;ll only need to increase i</span>
</span></span><span style="display:flex;"><span>               <span style="color:#75715e">;; i -- notice that this _if_ does not have an _else_</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>               (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">=</span> <span style="color:#ae81ff">1</span> (<span style="color:#a6e22e">aref</span> numbers i))
</span></span><span style="display:flex;"><span>                   (<span style="color:#66d9ef">progn</span>
</span></span><span style="display:flex;"><span>                     <span style="color:#75715e">;; since we are on a prime, we&#39;ll iterate over</span>
</span></span><span style="display:flex;"><span>                     <span style="color:#75715e">;; the multiples of the prime (starting at the</span>
</span></span><span style="display:flex;"><span>                     <span style="color:#75715e">;; square of the prime), so (i^2 + i*x)</span>
</span></span><span style="display:flex;"><span>                     (setf x <span style="color:#ae81ff">0</span>) <span style="color:#75715e">;; notice starting x = 0</span>
</span></span><span style="display:flex;"><span>                     (loop while (<span style="color:#a6e22e">&lt;</span> (setf j (<span style="color:#a6e22e">+</span> (<span style="color:#a6e22e">expt</span> i <span style="color:#ae81ff">2</span>) (<span style="color:#a6e22e">*</span> i x))) n)
</span></span><span style="display:flex;"><span>                           do(<span style="color:#66d9ef">progn</span>
</span></span><span style="display:flex;"><span>                               (setf (<span style="color:#a6e22e">aref</span> numbers j) <span style="color:#ae81ff">0</span>) <span style="color:#75715e">;; not a prime!</span>
</span></span><span style="display:flex;"><span>                               (setf x (<span style="color:#a6e22e">1+</span> x)))))) <span style="color:#75715e">;; increment x for</span>
</span></span><span style="display:flex;"><span>                                                   <span style="color:#75715e">;; the next</span>
</span></span><span style="display:flex;"><span>                                                   <span style="color:#75715e">;; multiple</span>
</span></span><span style="display:flex;"><span>               <span style="color:#75715e">;;</span>
</span></span><span style="display:flex;"><span>               <span style="color:#75715e">;; if we are not on a prime, then we just skip to the</span>
</span></span><span style="display:flex;"><span>               <span style="color:#75715e">;; next number by incrementing the index.</span>
</span></span><span style="display:flex;"><span>               (setf i (<span style="color:#a6e22e">1+</span> i))))
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; notice that we are still in the let, so generate the list of</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; prime numbers</span>
</span></span><span style="display:flex;"><span>    (loop for x from <span style="color:#ae81ff">2</span> to (<span style="color:#a6e22e">1-</span> n)
</span></span><span style="display:flex;"><span>          when (<span style="color:#a6e22e">=</span> (<span style="color:#a6e22e">aref</span> numbers x) <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            collect x)))</span></span></code></pre></td></tr></table>
</div>
</div>
<p>Is this the best? I&rsquo;m not sure. Is it the most readable? Probably not. I&rsquo;m always a bit ambivalent
about using <code>loop</code> in Common Lisp. I shouldn&rsquo;t be since it&rsquo;s actually a pretty impressive <a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL</a>. Loop or
not, I&rsquo;d rather pull some of this apart,</p>
<p>But, for the moment, I&rsquo;ll leave it.</p>
<p>So what&rsquo;s returned is a list of primes. But I want the 10001th prime.</p>
<p>I need to turn the list into an array, and then index to the 10001th prime.</p>
<p><code>coerce</code> is the answer.</p>
<p><a id="code-snippet--get-prime"></a>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#75715e">;; now the following will get the nth prime number</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defun get-prime (i <span style="color:#66d9ef">&amp;optional</span> n)
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Generate a list of n prime numbers and returns the ith prime number.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">An n of 1600000 is more than sufficient to get the 10001th prime.&#34;</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">progn</span> (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">null</span> n) (setf n <span style="color:#ae81ff">1600000</span>))
</span></span><span style="display:flex;"><span>         (<span style="color:#a6e22e">aref</span> (<span style="color:#a6e22e">coerce</span> (generate-primes n) <span style="color:#e6db74">&#39;vector</span>) (<span style="color:#a6e22e">1-</span> i))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(get-prime <span style="color:#ae81ff">10001</span>)</span></span></code></pre></div></p>
<p>So, what is the 10001th prime? Will we get the right answer?</p>
<p>Invoking we get…</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>104743
</span></span></code></pre></div><p>Yup!</p>
<p>Fun!</p>

</div>
<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts"><li><span>Aug 22, 2024</span> &raquo;
<a href="/posts/project-euler-num-6/">Project Euler - Number 6</a>

</li><li><span>Aug 20, 2024</span> &raquo;
<a href="/posts/project-euler-num-5/">Project Euler - Number 5</a>

</li></ul>
</div>
  </main>
  <footer>
    <div class="footer">
  <div class="contact">
    <pr><br><a href="https://www.linkedin.com/in/karl-s-9a705398/">linkedIn</a>
      <br>
      <pr><a href="https://github.com/kes">github.com</a>

  </div>
</div>

  </footer>
  </div>
</body>
</html>

