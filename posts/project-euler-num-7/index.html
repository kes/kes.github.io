<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Project Euler - Number 7 :: </title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="You can find the problem here: https://projecteuler.net/problem=7
The problem statement:
By listing the first six prime numbers: 2, 3, 5, 7, 11, and 13 we can see that the 6th prime is 13.
What is the 10001st prime number?
Consider an array like this:
n a[n] 0 0 1 1 2 1 3 1 4 0 5 1 6 0 7 1 8 0 9 0 10 0 11 1 12 0 13 1 where n (the index of the array) is the number of interest &amp;ndash; So, is the number prime?" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://kes.github.io/posts/project-euler-num-7/" />





  
  <link rel="stylesheet" href="https://kes.github.io/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="https://kes.github.io/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">




<link rel="stylesheet" href="https://kes.github.io/style.css">


<link rel="shortcut icon" href="https://kes.github.io/favicon.png">
<link rel="apple-touch-icon" href="https://kes.github.io/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Project Euler - Number 7">
<meta property="og:description" content="You can find the problem here: https://projecteuler.net/problem=7
The problem statement:
By listing the first six prime numbers: 2, 3, 5, 7, 11, and 13 we can see that the 6th prime is 13.
What is the 10001st prime number?
Consider an array like this:
n a[n] 0 0 1 1 2 1 3 1 4 0 5 1 6 0 7 1 8 0 9 0 10 0 11 1 12 0 13 1 where n (the index of the array) is the number of interest &amp;ndash; So, is the number prime?" />
<meta property="og:url" content="https://kes.github.io/posts/project-euler-num-7/" />
<meta property="og:site_name" content="" />

  <meta property="og:image" content="https://kes.github.io/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2024-08-22 00:00:00 &#43;0000 UTC" />












  
  <script src="https://kes.github.io/js/mathjax-config.js"></script>

  
  <script
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>




</head>
<body>


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Karl Stump
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about/about/">About</a></li>
        
      
        
          <li><a href="/leetcode/">Leet Code</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about/about/" >About</a></li>
        
      
        
          <li><a href="/leetcode/" >Leet Code</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://kes.github.io/posts/project-euler-num-7/">Project Euler - Number 7</a>
  </h1>
  <div class="post-meta"><time class="post-date">2024-08-22</time><span class="post-author">[Karl Stump]</span></div>

  
    <span class="post-tags">
      
      #<a href="https://kes.github.io/tags/euler/">euler</a>&nbsp;
      
      #<a href="https://kes.github.io/tags/lisp/">lisp</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p>You can find the problem here: <a href="https://projecteuler.net/problem=7">https://projecteuler.net/problem=7</a></p>
<p>The problem statement:</p>
<blockquote>
<p>By listing the first six prime numbers: 2, 3, 5, 7, 11, and 13 we can see that the 6th prime is 13.</p>
<p>What is the 10001st prime number?</p>
</blockquote>
<p>Consider an array like this:</p>
<style>.table-1 table { text-align: center;  width: 30%;  margin: 0 auto;  }</style>
<div class="ox-hugo-table table-1">
<table>
<thead>
<tr>
<th>n</th>
<th>a[n]</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
</tr>
<tr>
<td>8</td>
<td>0</td>
</tr>
<tr>
<td>9</td>
<td>0</td>
</tr>
<tr>
<td>10</td>
<td>0</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
</tr>
<tr>
<td>12</td>
<td>0</td>
</tr>
<tr>
<td>13</td>
<td>1</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>where n (the index of the array) is the number of interest &ndash; So, is the number prime? If
a[n] is 1 the number is prime, and if 0 it is not prime.</p>
<p>Generating an array initialized to 1 is easy enough. We can then go through all the multiples of the
primes set the value at that index to 0. This procedure is called the Sieve of Eratosthenes, a
description of which is easily findable. For example, here:
<a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes</a></p>
<p>If I follow the given algorithm, then I get the following:</p>
<p><a id="code-snippet--defun-generate-primes"></a></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span>(defun generate-primes (n)
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Returns a list of primes from 2 to n&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; Sieve of Eratosthenes</span>
</span></span><span style="display:flex;"><span>  (loop for i from <span style="color:#ae81ff">2</span> to (<span style="color:#a6e22e">floor</span> (<span style="color:#a6e22e">sqrt</span> n))
</span></span><span style="display:flex;"><span>	with numbers <span style="color:#a6e22e">=</span> (<span style="color:#a6e22e">make-array</span> (<span style="color:#a6e22e">1+</span> n) <span style="color:#e6db74">:initial-element</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>	when (<span style="color:#a6e22e">=</span> <span style="color:#ae81ff">1</span> (<span style="color:#a6e22e">aref</span> numbers i))
</span></span><span style="display:flex;"><span>	  do
</span></span><span style="display:flex;"><span>	     <span style="color:#75715e">;; now we&#39;ll iterate over every (i^2 + i*x) number</span>
</span></span><span style="display:flex;"><span>	     (loop for x from <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>		   with j <span style="color:#a6e22e">=</span> <span style="color:#ae81ff">0</span> and i-squared <span style="color:#a6e22e">=</span> (<span style="color:#a6e22e">expt</span> i <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>		   while (<span style="color:#a6e22e">&lt;=</span> (setf j (<span style="color:#a6e22e">+</span> i-squared (<span style="color:#a6e22e">*</span> i x))) n)
</span></span><span style="display:flex;"><span>		   do
</span></span><span style="display:flex;"><span>		      (setf (<span style="color:#a6e22e">aref</span> numbers j) <span style="color:#ae81ff">0</span>))
</span></span><span style="display:flex;"><span>	finally
</span></span><span style="display:flex;"><span>	   <span style="color:#75715e">;; generate the list of prime numbers from the array.</span>
</span></span><span style="display:flex;"><span>	   (return (loop for x from <span style="color:#ae81ff">2</span> to n
</span></span><span style="display:flex;"><span>			 when (<span style="color:#a6e22e">=</span> (<span style="color:#a6e22e">aref</span> numbers x) <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>			   collect x))))
</span></span></code></pre></td></tr></table>
</div>
</div><p>Starting with 2, we will eliminate all the multiples up to number n. When we get to the next number,
3, we start eliminating at \( 3^2 \). Why? Because the previous iteration using the number 2 will
have eliminated all of the numbers less than \( 3^2 \) that have 3 as a factor, which is \( 3 * 2
\). When we move to 4, we don&rsquo;t process it at all because it&rsquo;s not a prime and has been eliminated
(by placing a 0 at that index). Then we come to 5, again we start looking for multiples at \( 5^2
\). Why?  Because the previous iterations on 2 and 3 will have eliminated \(5 * 2\) and \(5 *
3\). The same will be true for each prime.</p>
<p>I&rsquo;ve always been a bit ambivalent about using <code>loop</code> in Common Lisp. Perhaps I should be using scheme?
But that attitude has also caused me not to study <code>loop</code> syntax as I should.</p>
<p>But once you study loop at <a href="https://www.lispworks.com/documentation/HyperSpec/Front/index.htm">CLHS</a> you&rsquo;re confronted with a really powerful <a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL</a>. And one gets the feeling
that it is both understandable and yet inexhaustible. I know I&rsquo;ve spent more time looking at the
documentation for <code>loop</code> in order to write the sieve. I think the result is concise and to the point.</p>
<p>Does it work? Let&rsquo;s test it.</p>
<p><a id="code-snippet--run-generate-primes"></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span>(generate-primes <span style="color:#ae81ff">20</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>(2 3 5 7 11 13 17 19)
</span></span></code></pre></div><p>Perfect! A list of primes. But I want the 10001th prime.</p>
<p>I can just turn the list into an array, and then index to the 10001th prime.</p>
<p><code>coerce</code> is the answer for this.</p>
<p><a id="code-snippet--defun-get-prime"></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#75715e">;; now the following will get the nth prime number</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defun get-prime (i <span style="color:#66d9ef">&amp;optional</span> n)
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Generate a list of n prime numbers and returns the ith prime number.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">An n of 105,000 is sufficient to get the 10001th prime.&#34;</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">progn</span> (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">null</span> n) (setf n <span style="color:#ae81ff">105000</span>))
</span></span><span style="display:flex;"><span>	 (<span style="color:#a6e22e">aref</span> (<span style="color:#a6e22e">coerce</span> (generate-primes n) <span style="color:#e6db74">&#39;vector</span>) (<span style="color:#a6e22e">1-</span> i))))
</span></span></code></pre></div><p>So, what is the 10001th prime? Will we get the right answer?</p>
<p>Invoking &hellip;</p>
<p><a id="code-snippet--run-get-prime"></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span>(get-prime <span style="color:#ae81ff">10001</span>)
</span></span></code></pre></div><p>we get&hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>104743
</span></span></code></pre></div><p>Yup!</p>
<p>Fun!</p>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Read other posts</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://kes.github.io/posts/project-euler-num-6/" class="button inline prev">
        &lt; [<span class="button__text">Project Euler - Number 6</span>]
      </a>
    
    
      ::
    
    
      <a href="https://kes.github.io/posts/project-euler-num-5/" class="button inline next">
         [<span class="button__text">Project Euler - Number 5</span>] &gt;
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
